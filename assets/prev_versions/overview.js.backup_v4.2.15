window.dash_clientside = Object.assign(
  {},
  window.dash_clientside,
  {
    overview: {
      init: function () {
        console.log("[WP OVERVIEW] init called");

        const boxes = document.querySelectorAll("[id$='-hero-image_wp_over']");
        console.log("[WP OVERVIEW] boxes found:", boxes.length);

        boxes.forEach((box) => {
          if (box.dataset.bound === "true") return;
          box.dataset.bound = "true";

          const serviceId = box.id.replace("-box", "");
          const cursorOut = document.getElementById(`${serviceId}-cursor`);

          // ⬇️ ΕΔΩ Η ΜΟΝΗ ΑΛΛΑΓΗ: images από PY
          const imagesAttr = box.getAttribute("data-images");
          if (!imagesAttr) {
            console.warn("[WP OVERVIEW] no data-images for", box.id);
            return;
          }

          const images = imagesAttr
            .split("|")
            .map((s) => s.trim())
            .filter(Boolean);

          if (images.length < 2) return;

          let currentImage = 0;

          // ensure initial image
          box.style.backgroundImage = `url("${images[0]}")`;

          box.addEventListener("mousemove", (e) => {
            if (!cursorOut) return;
            // intentionally disabled
          });

          box.addEventListener("mousedown", (e) => {
            if (e.button !== 0) return;
            currentImage = (currentImage + 1) % images.length;
            box.style.backgroundImage = `url("${images[currentImage]}")`;
          });

          box.addEventListener("contextmenu", (e) =>
            e.preventDefault()
          );
        });

        return "";
      },
    },
  }
);